{"ast":null,"code":"import { createAsyncThunk, createSlice, createAction } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport baseURL from \"../../../utils/baseURL\"; //Actions for redirect\n\nexport const resetIncCreated = createAction(\"income/created/reset\");\nexport const resetIncUpdate = createAction(\"income/update/reset\"); //Create action\n\nexport const createIncomeAction = createAsyncThunk(\"income/create\", async (payload, _ref) => {\n  var _getState, _getState$users, _getState$users$userA;\n\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref;\n  //get user token from store\n  const userToken = (_getState = getState()) === null || _getState === void 0 ? void 0 : (_getState$users = _getState.users) === null || _getState$users === void 0 ? void 0 : (_getState$users$userA = _getState$users.userAuth) === null || _getState$users$userA === void 0 ? void 0 : _getState$users$userA.token;\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${userToken}`\n    }\n  };\n\n  try {\n    //make http call here\n    const {\n      data\n    } = await axios.post(`${baseURL}/income`, payload, config);\n    dispatch(resetIncCreated());\n    return data;\n  } catch (error) {\n    var _error$response;\n\n    if (!(error !== null && error !== void 0 && error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n  }\n}); //fetch all expenses\n\nexport const fetchAllIncomeAction = createAsyncThunk(\"income/fetch-all\", async (payload, _ref2) => {\n  var _getState2, _getState2$users;\n\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref2;\n  const user = (_getState2 = getState()) === null || _getState2 === void 0 ? void 0 : (_getState2$users = _getState2.users) === null || _getState2$users === void 0 ? void 0 : _getState2$users.userAuth;\n  const config = {\n    headers: {\n      authorization: `Bearer ${user === null || user === void 0 ? void 0 : user.token}`\n    }\n  };\n\n  try {\n    const {\n      data\n    } = await axios.get(`${baseURL}/income?page=${payload}`, config);\n    return data;\n  } catch (error) {\n    var _error$response2;\n\n    if (!(error !== null && error !== void 0 && error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n  }\n}); //Create action\n\nexport const updateIncomeAction = createAsyncThunk(\"income/update\", async (payload, _ref3) => {\n  var _getState3, _getState3$users, _getState3$users$user;\n\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref3;\n  //get user token from store\n  const userToken = (_getState3 = getState()) === null || _getState3 === void 0 ? void 0 : (_getState3$users = _getState3.users) === null || _getState3$users === void 0 ? void 0 : (_getState3$users$user = _getState3$users.userAuth) === null || _getState3$users$user === void 0 ? void 0 : _getState3$users$user.token;\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${userToken}`\n    }\n  };\n\n  try {\n    //make http call here\n    const {\n      data\n    } = await axios.put(`${baseURL}/income/${payload === null || payload === void 0 ? void 0 : payload.id}`, payload, config);\n    return data;\n  } catch (error) {\n    var _error$response3;\n\n    if (!(error !== null && error !== void 0 && error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data);\n  }\n}); //slices\n\nconst incomeSlices = createSlice({\n  name: \"income\",\n  initialState: {},\n  extraReducers: builder => {\n    //   Create Expense\n    builder.addCase(createIncomeAction.pending, (state, action) => {\n      state.loading = true;\n    }); //reset action\n\n    builder.addCase(resetIncCreated, (state, acyion) => {\n      state.isIncCreated = true;\n    });\n    builder.addCase(createIncomeAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.incomeCreated = action === null || action === void 0 ? void 0 : action.payload;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n      state.isIncCreated = false;\n    });\n    builder.addCase(createIncomeAction.rejected, (state, action) => {\n      var _action$payload, _action$error;\n\n      state.loading = false;\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.msg;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error = action.error) === null || _action$error === void 0 ? void 0 : _action$error.msg;\n    }); //   fetch all Expense\n\n    builder.addCase(fetchAllIncomeAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    builder.addCase(fetchAllIncomeAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.incomeList = action === null || action === void 0 ? void 0 : action.payload;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(fetchAllIncomeAction.rejected, (state, action) => {\n      var _action$payload2, _action$error2;\n\n      state.loading = false;\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : _action$payload2.msg;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error2 = action.error) === null || _action$error2 === void 0 ? void 0 : _action$error2.msg;\n    }); //   update Expense\n\n    builder.addCase(updateIncomeAction.pending, (state, action) => {\n      state.loading = true;\n    }); //reset action\n\n    builder.addCase(resetIncUpdate, (state, acyion) => {\n      state.isIncUpdated = true;\n    });\n    builder.addCase(updateIncomeAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.incomeUpdated = action === null || action === void 0 ? void 0 : action.payload;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n      state.isIncUpdated = false;\n    });\n    builder.addCase(updateIncomeAction.rejected, (state, action) => {\n      var _action$payload3, _action$error3;\n\n      state.loading = false;\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload3 = action.payload) === null || _action$payload3 === void 0 ? void 0 : _action$payload3.msg;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error3 = action.error) === null || _action$error3 === void 0 ? void 0 : _action$error3.msg;\n    });\n  }\n});\nexport default incomeSlices.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","createAction","axios","baseURL","resetIncCreated","resetIncUpdate","createIncomeAction","payload","rejectWithValue","getState","dispatch","userToken","users","userAuth","token","config","headers","Authorization","data","post","error","response","fetchAllIncomeAction","user","authorization","get","updateIncomeAction","put","id","incomeSlices","name","initialState","extraReducers","builder","addCase","pending","state","action","loading","acyion","isIncCreated","fulfilled","incomeCreated","appErr","undefined","serverErr","rejected","msg","incomeList","isIncUpdated","incomeUpdated","reducer"],"sources":["E:/WORK/expense-tracker/client/src/redux/slices/income/incomeSlices.js"],"sourcesContent":["import { createAsyncThunk, createSlice, createAction } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport baseURL from \"../../../utils/baseURL\";\n\n//Actions for redirect\nexport const resetIncCreated = createAction(\"income/created/reset\");\nexport const resetIncUpdate = createAction(\"income/update/reset\");\n\n//Create action\nexport const createIncomeAction = createAsyncThunk(\n  \"income/create\",\n  async (payload, { rejectWithValue, getState, dispatch }) => {\n    //get user token from store\n    const userToken = getState()?.users?.userAuth?.token;\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${userToken}`,\n      },\n    };\n    try {\n      //make http call here\n      const { data } = await axios.post(`${baseURL}/income`, payload, config);\n      dispatch(resetIncCreated());\n      return data;\n    } catch (error) {\n      if (!error?.response) {\n        throw error;\n      }\n      return rejectWithValue(error?.response?.data);\n    }\n  }\n);\n\n//fetch all expenses\nexport const fetchAllIncomeAction = createAsyncThunk(\n  \"income/fetch-all\",\n  async (payload, { rejectWithValue, getState, dispatch }) => {\n    const user = getState()?.users?.userAuth;\n    const config = {\n      headers: {\n        authorization: `Bearer ${user?.token}`,\n      },\n    };\n    try {\n      const { data } = await axios.get(\n        `${baseURL}/income?page=${payload}`,\n        config\n      );\n      return data;\n    } catch (error) {\n      if (!error?.response) {\n        throw error;\n      }\n      return rejectWithValue(error?.response?.data);\n    }\n  }\n);\n\n//Create action\nexport const updateIncomeAction = createAsyncThunk(\n  \"income/update\",\n  async (payload, { rejectWithValue, getState, dispatch }) => {\n    //get user token from store\n    const userToken = getState()?.users?.userAuth?.token;\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${userToken}`,\n      },\n    };\n    try {\n      //make http call here\n      const { data } = await axios.put(\n        `${baseURL}/income/${payload?.id}`,\n        payload,\n        config\n      );\n      return data;\n    } catch (error) {\n      if (!error?.response) {\n        throw error;\n      }\n      return rejectWithValue(error?.response?.data);\n    }\n  }\n);\n//slices\n\nconst incomeSlices = createSlice({\n  name: \"income\",\n  initialState: {},\n  extraReducers: builder => {\n    //   Create Expense\n    builder.addCase(createIncomeAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    //reset action\n    builder.addCase(resetIncCreated, (state, acyion) => {\n      state.isIncCreated = true;\n    });\n    builder.addCase(createIncomeAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.incomeCreated = action?.payload;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n      state.isIncCreated = false;\n    });\n    builder.addCase(createIncomeAction.rejected, (state, action) => {\n      state.loading = false;\n      state.appErr = action?.payload?.msg;\n      state.serverErr = action?.error?.msg;\n    });\n\n    //   fetch all Expense\n    builder.addCase(fetchAllIncomeAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    builder.addCase(fetchAllIncomeAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.incomeList = action?.payload;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(fetchAllIncomeAction.rejected, (state, action) => {\n      state.loading = false;\n      state.appErr = action?.payload?.msg;\n      state.serverErr = action?.error?.msg;\n    });\n\n    //   update Expense\n    builder.addCase(updateIncomeAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    //reset action\n    builder.addCase(resetIncUpdate, (state, acyion) => {\n      state.isIncUpdated = true;\n    });\n    builder.addCase(updateIncomeAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.incomeUpdated = action?.payload;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n      state.isIncUpdated = false;\n    });\n    builder.addCase(updateIncomeAction.rejected, (state, action) => {\n      state.loading = false;\n      state.appErr = action?.payload?.msg;\n      state.serverErr = action?.error?.msg;\n    });\n  },\n});\n\nexport default incomeSlices.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}